var Client;(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{performAction:()=>n});function n(e){const t=document.getElementById("dateField").value,n=[t.slice(-5),t.slice(0,4)].join("-"),l=[t.slice(-5)].join("-");console.log(l);document.getElementById("feelings").value;const s=document.getElementById("city").value.trim(),m=new Date(n).getTime(),d=Math.round((m-o.getTime())/864e5+1);c("http://api.geonames.org/searchJSON?q=",s,"&maxRows=1&username=icufishmg",l).then((function(e){i("/travelinfo",{city:e.geonames[0].name,country:e.geonames[0].countryName,highTemp:e.data[0].max_temp,precip:e.data[0].precip,minTemp:e.data[0].min_temp,travelDate:n,daysCountdown:d}).then(r()).then(a("key=22010688-d7e3c3ffcac39b9c48e1a3a8d","https://pixabay.com/api/?",s))}))}document.getElementById("generate").addEventListener("click",n);let o=new Date;o.getMonth(),o.getDate(),o.getFullYear();const a=async(e,t,n)=>{const o=await fetch(`${t}${e}&q=${n}+city&image_type=photo`);console.log(`${t}${e}&q=${n}+city&image_type=photo`);try{const e=await o.json();console.log(e),document.getElementById("cityImage").src=e.hits[0].webformatURL}catch(e){console.log(e,"error")}},c=async(e,t,n,o)=>{const a=await fetch(e+t+n);try{const e=await a.json(),t=await fetch(`https://api.weatherbit.io/v2.0/normals?&lat=${e.geonames[0].lat}&lon=${e.geonames[0].lng}&start_day=${o}&end_day=${o}&tp=daily&key=1d235b160c6c4917b499388daca9bc82&units=I`),n=await t.json(),c={...e,...n};return console.log(c),console.log(c.geonames[0].countryName),c}catch(e){console.log("error",e)}},i=async(e="",t={})=>{await fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},r=async()=>{const e=await fetch("/projectdata");try{const t=await e.json();console.log(t),document.getElementById("entry").className="holderResponse",document.getElementById("content").innerHTML=`Country: ${t.slice(-1)[0].country}`,document.getElementById("date").innerHTML=`City: ${t.slice(-1)[0].city}`,document.getElementById("highTemp").innerHTML=`High Temperature: ${t.slice(-1)[0].highTemp}`,document.getElementById("minTemp").innerHTML=`Low Temperature: ${t.slice(-1)[0].minTemp}`,document.getElementById("precip").innerHTML=`Precipitation: ${t.slice(-1)[0].precip}`,document.getElementById("travelDate").innerHTML=`Travel Date: ${t.slice(-1)[0].travelDate}`,document.getElementById("daysCountdown").innerHTML=`Days Until Travel: ${t.slice(-1)[0].daysCountdown}`}catch(e){console.log("error",e)}};Client=t})();